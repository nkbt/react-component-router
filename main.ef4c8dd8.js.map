{"version":3,"file":"main.ef4c8dd8.js","mappings":"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","sources":["webpack://react-component-router/webpack/runtime/chunk loaded","webpack://react-component-router/./src/DispatchContext.js","webpack://react-component-router/./src/initialState.js","webpack://react-component-router/./src/StateContext.js","webpack://react-component-router/./src/codec.js","webpack://react-component-router/./src/constants.js","webpack://react-component-router/./src/reducer.js","webpack://react-component-router/./src/hooks.js","webpack://react-component-router/./src/Router.js","webpack://react-component-router/./example/A/index.js","webpack://react-component-router/./example/A/A.css?1628","webpack://react-component-router/./example/Menu/index.js","webpack://react-component-router/./example/Menu/Menu.css?76a0","webpack://react-component-router/./example/App/Home/index.js","webpack://react-component-router/./example/App/Foo/index.js","webpack://react-component-router/./example/App/Foo/Foo.css?40d2","webpack://react-component-router/./example/App/Bar/index.js","webpack://react-component-router/./example/App/Bar/Bar.css?2c19","webpack://react-component-router/./example/App/index.js","webpack://react-component-router/./example/App/App.css?e4f7","webpack://react-component-router/./example/bootstrap.js","webpack://react-component-router/./src/useLocationSync.js","webpack://react-component-router/./example/index.js","webpack://react-component-router/webpack/bootstrap","webpack://react-component-router/webpack/runtime/define property getters","webpack://react-component-router/webpack/runtime/hasOwnProperty shorthand","webpack://react-component-router/webpack/runtime/jsonp chunk loading","webpack://react-component-router/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","import {createContext} from 'react';\n\nexport const DispatchContext = createContext(() => {});\n","export const initialState = {\n  query: {},\n  params: {},\n  // just some cached values\n  search: '',\n  cleanQuery: {},\n  cleanSearch: ''\n};\n","import {createContext} from 'react';\nimport {initialState} from './initialState';\n\nexport const StateContext = createContext(initialState);\n","export function safeQuery(query = {}) {\n  const newQuery = query === null ? {} : query;\n\n  Object.keys(newQuery).forEach(key => {\n    newQuery[key] = `${newQuery[key]}`;\n  });\n\n  return newQuery;\n}\n\nexport function queryToSearch(query) {\n  const params = new URLSearchParams(Object.entries(query));\n  params.sort();\n  const search = params.toString();\n  return search.length > 0 ? `?${search}` : '';\n}\n\nexport function searchToQuery(search) {\n  return safeQuery(Object.fromEntries(new URLSearchParams(search.substr(1))));\n}\n","export const ADD = 'ADD';\nexport const REMOVE = 'REMOVE';\nexport const NAVIGATE = 'NAVIGATE';\nexport const RESTORE = 'RESTORE';\n","import {shallowEqualObjects} from '@nkbt/shallow-equal-objects';\nimport {initialState} from './initialState';\nimport {queryToSearch, safeQuery} from './codec';\nimport {ADD, NAVIGATE, REMOVE, RESTORE} from './constants';\n\nexport function isEqualState(stateA, stateB) {\n  return shallowEqualObjects(stateA.query, stateB.query) && shallowEqualObjects(stateA.params, stateB.params);\n}\n\nexport function cleanupQuery(query, params) {\n  return Object.keys(query).reduce(\n    (clean, key) => (key in params && query[key] === params[key] ? clean : Object.assign(clean, {[key]: query[key]})),\n    {}\n  );\n}\nexport function recalculate(state) {\n  const newQuery = safeQuery({...state.params, ...state.query});\n  const newState = shallowEqualObjects(state.query, newQuery) ? state : {...state, query: newQuery};\n\n  const search = queryToSearch(newQuery);\n  const cleanQuery = cleanupQuery(newQuery, state.params);\n  const cleanSearch = queryToSearch(cleanQuery);\n  return Object.assign(newState, {search, cleanQuery, cleanSearch});\n}\n\nexport function onRestore(state, {query}) {\n  const newQuery = {...query};\n  if (shallowEqualObjects(state.query, newQuery)) {\n    return state;\n  }\n  return recalculate({...state, query: newQuery});\n}\n\nexport function onNavigate(state, {query}) {\n  const newQuery = {...state.query, ...query};\n  if (shallowEqualObjects(state.query, newQuery)) {\n    return state;\n  }\n  return recalculate({...state, query: newQuery});\n}\n\nexport function onAdd(state, {params}) {\n  const newParams = {...state.params, ...params};\n  if (shallowEqualObjects(state.params, newParams)) {\n    return state;\n  }\n  return recalculate({...state, params: newParams});\n}\n\nexport function onRemove(state, {params}) {\n  return recalculate({\n    ...state,\n    query: Object.fromEntries(Object.entries(state.query).filter(([key]) => !(key in params))),\n    params: Object.fromEntries(Object.entries(state.params).filter(([key]) => !(key in params)))\n  });\n}\n\nexport function reduce(state, action) {\n  const mapping = {\n    [RESTORE]: onRestore,\n    [NAVIGATE]: onNavigate,\n    [ADD]: onAdd,\n    [REMOVE]: onRemove\n  };\n  return action.type in mapping ? mapping[action.type](state, action) : state;\n}\n\nexport function reducer(state = initialState, {type, ...payload}) {\n  const newState = reduce(state, {type, ...payload});\n  return isEqualState(state, newState) ? state : newState;\n}\n","import {useCallback, useContext} from 'react';\nimport {StateContext} from './StateContext';\nimport {DispatchContext} from './DispatchContext';\nimport {onNavigate} from './reducer';\nimport {ADD, NAVIGATE, REMOVE, RESTORE} from './constants';\n\nexport function useValue(key) {\n  const router = useContext(StateContext);\n  return router.query[key];\n}\n\nexport function useSearch() {\n  const router = useContext(StateContext);\n  const {search} = router;\n  return search;\n}\n\nexport function useCleanSearch() {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  return cleanSearch;\n}\n\nexport function useIsActive(query) {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  if (!query) {\n    return false;\n  }\n  const {cleanSearch: nextCleanSearch} = onNavigate(router, {query});\n  return cleanSearch === nextCleanSearch;\n}\n\nexport function useCleanHref(query) {\n  const router = useContext(StateContext);\n  const {cleanSearch} = router;\n  if (!query) {\n    return cleanSearch;\n  }\n  const {cleanSearch: nextCleanSearch} = onNavigate(router, {query});\n  return nextCleanSearch;\n}\n\nexport function useHref(query) {\n  const router = useContext(StateContext);\n  const {search} = router;\n  if (!query) {\n    return search;\n  }\n  const {search: nextSearch} = onNavigate(router, {query});\n  return nextSearch;\n}\n\nexport function useNavigate() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(query => dispatch({type: NAVIGATE, query}), [dispatch]);\n}\n\nexport function useAdd() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(params => dispatch({type: ADD, params}), [dispatch]);\n}\n\nexport function useRemove() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(params => dispatch({type: REMOVE, params}), [dispatch]);\n}\n\nexport function useRestore() {\n  const dispatch = useContext(DispatchContext);\n  return useCallback(query => dispatch({type: RESTORE, query}), [dispatch]);\n}\n","import React, {useReducer} from 'react';\nimport PropTypes from 'prop-types';\nimport {DispatchContext} from './DispatchContext';\nimport {reducer, recalculate} from './reducer';\nimport {searchToQuery} from './codec';\nimport {StateContext} from './StateContext';\n\nexport function Router({params, query, search, init, children}) {\n  const [state, dispatch] = useReducer(\n    reducer,\n    recalculate({\n      params,\n      query: {...query, ...searchToQuery(search)}\n    }),\n    init\n  );\n  return (\n    <DispatchContext.Provider value={dispatch}>\n      <StateContext.Provider value={state}>{children}</StateContext.Provider>\n    </DispatchContext.Provider>\n  );\n}\nRouter.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  params: PropTypes.object,\n  // eslint-disable-next-line react/forbid-prop-types\n  query: PropTypes.object,\n  search: PropTypes.string,\n  init: PropTypes.func,\n  children: PropTypes.node.isRequired\n};\nRouter.defaultProps = {\n  params: {},\n  query: {},\n  search: '?',\n  init: undefined\n};\n","import React, {useCallback} from 'react';\nimport PropTypes from 'prop-types';\nimport {useCleanHref, useIsActive, useNavigate} from '../../src';\nimport css from './A.css';\n\nexport function A({query, children, ...rest}) {\n  const navigate = useNavigate();\n\n  const onClick = useCallback(\n    e => {\n      e.preventDefault();\n      navigate(query);\n    },\n    [navigate, query]\n  );\n\n  const href = useCleanHref(query);\n  const isActive = useIsActive(query);\n\n  return (\n    <a className={css.e} href={href} onClick={onClick} data-active={isActive} {...rest}>\n      {children}\n    </a>\n  );\n}\nA.propTypes = {\n  // eslint-disable-next-line react/forbid-prop-types\n  query: PropTypes.object,\n  children: PropTypes.node\n};\nA.defaultProps = {\n  query: {},\n  children: undefined\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-a\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport css from './Menu.css';\n\nexport function Menu({children}) {\n  return (\n    <ul className={css.e}>\n      {React.Children.map(children, item => (\n        <li>{item}</li>\n      ))}\n    </ul>\n  );\n}\nMenu.propTypes = {\n  children: PropTypes.node.isRequired\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-menu\"};","import React from 'react';\n\nexport function Home() {\n  return <h1>Hello, World!</h1>;\n}\n","import React, {useEffect} from 'react';\nimport {useAdd, useValue, useRemove} from '../../../src';\nimport {Menu} from '../../Menu';\nimport {A} from '../../A';\n\nimport css from './Foo.css';\n\nexport function Foo() {\n  const addDefaultParam = useAdd();\n  const removeDefaultParam = useRemove();\n\n  useEffect(() => {\n    addDefaultParam({foo: 1});\n    return () => removeDefaultParam({foo: 1});\n  }, [addDefaultParam, removeDefaultParam]);\n\n  const subpage = parseInt(useValue('foo'), 10);\n  return (\n    <div className={css.e}>\n      <h1>Foo</h1>\n      <Menu>\n        {[1, 2, 3, 4, 5].map(foo => (\n          <A key={foo} query={{foo}}>\n            Foo {foo}\n          </A>\n        ))}\n      </Menu>\n      <div className={css.content}>\n        {[1, 2, 3, 4, 5].map(foo => subpage === foo && <h2 key={foo}>Foo {foo}</h2>)}\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"app-foo\",\"content\":\"app-foo--content\"};","import React, {useEffect} from 'react';\nimport {useAdd, useValue, useRemove} from '../../../src';\nimport {Menu} from '../../Menu';\nimport {A} from '../../A';\n\nimport css from './Bar.css';\n\nexport function Bar() {\n  const subpage = useValue('bar');\n\n  const addDefaultParam = useAdd();\n  const removeDefaultParam = useRemove();\n\n  useEffect(() => {\n    addDefaultParam({bar: 'no'});\n    return () => removeDefaultParam({bar: 'no'});\n  }, [addDefaultParam, removeDefaultParam]);\n\n  return (\n    <div className={css.e}>\n      <h1>Foo</h1>\n      <Menu>\n        {['yes', 'no'].map(bar => (\n          <A key={bar} query={{bar}}>\n            Bar {bar}\n          </A>\n        ))}\n      </Menu>\n      <div className={css.content}>\n        {['yes', 'no'].map(bar => subpage === bar && <h2 key={bar}>Bar {bar}</h2>)}\n      </div>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"app-bar\",\"content\":\"app-bar--content\"};","import React from 'react';\nimport {useValue} from '../../src';\nimport {A} from '../A';\nimport {Menu} from '../Menu';\nimport {Home} from './Home';\nimport {Foo} from './Foo';\nimport {Bar} from './Bar';\n\nimport css from './App.css';\n\nexport function App() {\n  const page = useValue('page');\n\n  return (\n    <div className={css.e}>\n      <Menu>\n        <A query={{page: 'home'}}>Home</A>\n        <A query={{page: 'foo'}}>Foo</A>\n        <A query={{page: 'bar'}}>Bar</A>\n      </Menu>\n      <section className={css.content}>\n        {page === 'home' && <Home />}\n        {page === 'foo' && <Foo />}\n        {page === 'bar' && <Bar />}\n      </section>\n    </div>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"e\":\"example-app\",\"content\":\"example-app--content\"};","import React from 'react';\nimport {render} from 'react-dom';\nimport {Router, useLocationSync} from '../src';\nimport {App} from './App';\n\nimport './global.css';\n\nfunction WithLocation() {\n  useLocationSync();\n  return <App />;\n}\n\nexport const bootstrap = async () => {\n  const {whatever} = JSON.parse(document.querySelector('#config').innerHTML);\n  console.log('CONFIG', {whatever});\n\n  render(\n    <React.StrictMode>\n      <Router search={document.location.search} params={{page: 'home'}}>\n        <WithLocation />\n      </Router>\n    </React.StrictMode>,\n    document.querySelector('#app')\n  );\n};\n","import {useContext, useEffect, useRef} from 'react';\nimport {createBrowserHistory} from 'history';\nimport {searchToQuery} from './codec';\nimport {recalculate} from './reducer';\nimport {useRestore} from './hooks';\nimport {StateContext} from './StateContext';\n\nexport function useLocationSync({debounceTimeout = 50} = {}) {\n  const restore = useRestore();\n  const router = useContext(StateContext);\n\n  const {params, cleanSearch} = router;\n\n  const historyRef = useRef(createBrowserHistory());\n\n  // State -> URL\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      if (timer === null) {\n        return;\n      }\n      timer = null;\n      if (cleanSearch !== document.location.search) {\n        const {pathname} = document.location;\n        historyRef.current.push({pathname, search: cleanSearch});\n      }\n    }, debounceTimeout);\n\n    return () => {\n      clearTimeout(timer);\n      timer = null;\n    };\n  }, [cleanSearch, debounceTimeout]);\n\n  // URL -> State\n  useEffect(() => {\n    let didUnsubscribe = false;\n    const unsubscribe = historyRef.current.listen(history => {\n      if (didUnsubscribe) {\n        return;\n      }\n      const {query: nextQuery, cleanSearch: nextCleanSearch} = recalculate({\n        params,\n        query: searchToQuery(history.location.search)\n      });\n\n      if (cleanSearch !== nextCleanSearch) {\n        restore(nextQuery);\n      }\n    });\n\n    return () => {\n      didUnsubscribe = true;\n      unsubscribe();\n    };\n  }, [cleanSearch, params, restore]);\n}\n","import {bootstrap} from './bootstrap';\n\nbootstrap();\n\nif (module.hot) {\n  module.hot.accept('./bootstrap', () => {\n    bootstrap();\n  });\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t179: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkIds[i]] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkreact_component_router\"] = self[\"webpackChunkreact_component_router\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [216], () => (__webpack_require__(547)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","DispatchContext","createContext","initialState","query","params","search","cleanQuery","cleanSearch","StateContext","safeQuery","newQuery","Object","keys","forEach","key","queryToSearch","URLSearchParams","entries","sort","toString","length","searchToQuery","fromEntries","substr","REMOVE","NAVIGATE","RESTORE","recalculate","state","newState","shallowEqualObjects","reduce","clean","assign","onRestore","onNavigate","onAdd","newParams","onRemove","filter","reducer","type","payload","action","mapping","stateA","stateB","useValue","useContext","useAdd","dispatch","useCallback","useRemove","Router","init","children","useReducer","Provider","value","defaultProps","undefined","A","rest","navigate","useNavigate","onClick","e","preventDefault","href","router","nextCleanSearch","useCleanHref","isActive","useIsActive","className","Menu","React","item","Home","Foo","addDefaultParam","removeDefaultParam","useEffect","foo","subpage","parseInt","map","Bar","bar","App","page","WithLocation","debounceTimeout","restore","useRestore","historyRef","useRef","createBrowserHistory","timer","setTimeout","document","location","pathname","current","push","clearTimeout","didUnsubscribe","unsubscribe","listen","history","nextQuery","useLocationSync","async","whatever","JSON","parse","querySelector","innerHTML","console","log","render","bootstrap","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","every","splice","r","d","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","id","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}
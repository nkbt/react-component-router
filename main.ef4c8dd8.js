(()=>{"use strict";var e,r={547:(e,r,t)=>{var n=t(294),a=t(935);const c=(0,n.createContext)((()=>{})),o={query:{},params:{},search:"",cleanQuery:{},cleanSearch:""},u=(0,n.createContext)(o);var l=t(666);function s(e={}){const r=null===e?{}:e;return Object.keys(r).forEach((e=>{r[e]=`${r[e]}`})),r}function i(e){const r=new URLSearchParams(Object.entries(e));r.sort();const t=r.toString();return t.length>0?`?${t}`:""}function m(e){return s(Object.fromEntries(new URLSearchParams(e.substr(1))))}const p="REMOVE",f="NAVIGATE",y="RESTORE";function h(e){const r=s({...e.params,...e.query}),t=(0,l.V)(e.query,r)?e:{...e,query:r},n=i(r),a=(c=r,o=e.params,Object.keys(c).reduce(((e,r)=>r in o&&c[r]===o[r]?e:Object.assign(e,{[r]:c[r]})),{}));var c,o;const u=i(a);return Object.assign(t,{search:n,cleanQuery:a,cleanSearch:u})}function E(e,{query:r}){const t={...r};return(0,l.V)(e.query,t)?e:h({...e,query:t})}function v(e,{query:r}){const t={...e.query,...r};return(0,l.V)(e.query,t)?e:h({...e,query:t})}function b(e,{params:r}){const t={...e.params,...r};return(0,l.V)(e.params,t)?e:h({...e,params:t})}function d(e,{params:r}){return h({...e,query:Object.fromEntries(Object.entries(e.query).filter((([e])=>!(e in r)))),params:Object.fromEntries(Object.entries(e.params).filter((([e])=>!(e in r))))})}function q(e=o,{type:r,...t}){const n=function(e,r){const t={[y]:E,[f]:v,ADD:b,[p]:d};return r.type in t?t[r.type](e,r):e}(e,{type:r,...t});return a=e,c=n,(0,l.V)(a.query,c.query)&&(0,l.V)(a.params,c.params)?e:n;var a,c}function O(e){return(0,n.useContext)(u).query[e]}function C(){const e=(0,n.useContext)(c);return(0,n.useCallback)((r=>e({type:"ADD",params:r})),[e])}function g(){const e=(0,n.useContext)(c);return(0,n.useCallback)((r=>e({type:p,params:r})),[e])}function x({params:e,query:r,search:t,init:a,children:o}){const[l,s]=(0,n.useReducer)(q,h({params:e,query:{...r,...m(t)}}),a);return n.createElement(c.Provider,{value:s},n.createElement(u.Provider,{value:l},o))}x.defaultProps={params:{},query:{},search:"?",init:void 0};var k=t(682);function j(){return j=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},j.apply(this,arguments)}function S({query:e,children:r,...t}){const a=function(){const e=(0,n.useContext)(c);return(0,n.useCallback)((r=>e({type:f,query:r})),[e])}(),o=(0,n.useCallback)((r=>{r.preventDefault(),a(e)}),[a,e]),l=function(e){const r=(0,n.useContext)(u),{cleanSearch:t}=r;if(!e)return t;const{cleanSearch:a}=v(r,{query:e});return a}(e),s=function(e){const r=(0,n.useContext)(u),{cleanSearch:t}=r;if(!e)return!1;const{cleanSearch:a}=v(r,{query:e});return t===a}(e);return n.createElement("a",j({className:"example-a",href:l,onClick:o,"data-active":s},t),r)}S.defaultProps={query:{},children:void 0};function N({children:e}){return n.createElement("ul",{className:"example-menu"},n.Children.map(e,(e=>n.createElement("li",null,e))))}function P(){return n.createElement("h1",null,"Hello, World!")}function w(){const e=C(),r=g();(0,n.useEffect)((()=>(e({foo:1}),()=>r({foo:1}))),[e,r]);const t=parseInt(O("foo"),10);return n.createElement("div",{className:"app-foo"},n.createElement("h1",null,"Foo"),n.createElement(N,null,[1,2,3,4,5].map((e=>n.createElement(S,{key:e,query:{foo:e}},"Foo ",e)))),n.createElement("div",{className:"app-foo--content"},[1,2,3,4,5].map((e=>t===e&&n.createElement("h2",{key:e},"Foo ",e)))))}function V(){const e=O("bar"),r=C(),t=g();return(0,n.useEffect)((()=>(r({bar:"no"}),()=>t({bar:"no"}))),[r,t]),n.createElement("div",{className:"app-bar"},n.createElement("h1",null,"Foo"),n.createElement(N,null,["yes","no"].map((e=>n.createElement(S,{key:e,query:{bar:e}},"Bar ",e)))),n.createElement("div",{className:"app-bar--content"},["yes","no"].map((r=>e===r&&n.createElement("h2",{key:r},"Bar ",r)))))}function R(){const e=O("page");return n.createElement("div",{className:"example-app"},n.createElement(N,null,n.createElement(S,{query:{page:"home"}},"Home"),n.createElement(S,{query:{page:"foo"}},"Foo"),n.createElement(S,{query:{page:"bar"}},"Bar")),n.createElement("section",{className:"example-app--content"},"home"===e&&n.createElement(P,null),"foo"===e&&n.createElement(w,null),"bar"===e&&n.createElement(V,null)))}function F(){return function({debounceTimeout:e=50}={}){const r=function(){const e=(0,n.useContext)(c);return(0,n.useCallback)((r=>e({type:y,query:r})),[e])}(),t=(0,n.useContext)(u),{params:a,cleanSearch:o}=t,l=(0,n.useRef)((0,k.lX)());(0,n.useEffect)((()=>{let r=setTimeout((()=>{if(null!==r&&(r=null,o!==document.location.search)){const{pathname:e}=document.location;l.current.push({pathname:e,search:o})}}),e);return()=>{clearTimeout(r),r=null}}),[o,e]),(0,n.useEffect)((()=>{let e=!1;const t=l.current.listen((t=>{if(e)return;const{query:n,cleanSearch:c}=h({params:a,query:m(t.location.search)});o!==c&&r(n)}));return()=>{e=!0,t()}}),[o,a,r])}(),n.createElement(R,null)}(async()=>{const{whatever:e}=JSON.parse(document.querySelector("#config").innerHTML);console.log("CONFIG",{whatever:e}),(0,a.render)(n.createElement(n.StrictMode,null,n.createElement(x,{search:document.location.search,params:{page:"home"}},n.createElement(F,null))),document.querySelector("#app"))})()}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var c=t[e]={exports:{}};return r[e](c,c.exports,n),c.exports}n.m=r,e=[],n.O=(r,t,a,c)=>{if(!t){var o=1/0;for(i=0;i<e.length;i++){for(var[t,a,c]=e[i],u=!0,l=0;l<t.length;l++)(!1&c||o>=c)&&Object.keys(n.O).every((e=>n.O[e](t[l])))?t.splice(l--,1):(u=!1,c<o&&(o=c));if(u){e.splice(i--,1);var s=a();void 0!==s&&(r=s)}}return r}c=c||0;for(var i=e.length;i>0&&e[i-1][2]>c;i--)e[i]=e[i-1];e[i]=[t,a,c]},n.d=(e,r)=>{for(var t in r)n.o(r,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},n.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{var e={179:0};n.O.j=r=>0===e[r];var r=(r,t)=>{var a,c,[o,u,l]=t,s=0;if(o.some((r=>0!==e[r]))){for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(l)var i=l(n)}for(r&&r(t);s<o.length;s++)c=o[s],n.o(e,c)&&e[c]&&e[c][0](),e[o[s]]=0;return n.O(i)},t=self.webpackChunkreact_component_router=self.webpackChunkreact_component_router||[];t.forEach(r.bind(null,0)),t.push=r.bind(null,t.push.bind(t))})();var a=n.O(void 0,[216],(()=>n(547)));a=n.O(a)})();
//# sourceMappingURL=main.ef4c8dd8.js.map